
//------------------------------------------------------------------------------

//  <auto-generated>
//      This code was generated by:
//        TerminalGuiDesigner v1.0.18.0
//      You can make changes to this file and they will not be overwritten when saving.
//  </auto-generated>
// -----------------------------------------------------------------------------
namespace TerminalGuiDesigner.UI.Windows {
    using Terminal.Gui;
    
    
    public partial class ConfirmDialog {
        
        public bool Result { get; private set; }

        public ConfirmDialog(string title, string message, string okText = "Yes", string cancelText = "No") {
            
            const int defaultWidth = 50;

            InitializeComponent();

            btnOk.Text = okText;
            btnOk.Width = okText.Length + 4;
            btnOk.Clicked += () => {
                Result = true;
                Application.RequestStop();
                };
            btnOk.ColorScheme = Colors.Dialog;

            btnCancel.Text = cancelText;
            btnCancel.Width = okText.Length + 2;
            btnCancel.Clicked += () => {
                Result = false;
                Application.RequestStop();
            };
            btnCancel.ColorScheme = Colors.Dialog;

            Title = title;
            label1.Text = message;

            int buttonWidth;

            // align buttons bottom of dialog 
            buttonPanel.Width = buttonWidth = btnOk.Frame.Width + btnCancel.Frame.Width + 1;

            

            int maxWidthLine = TextFormatter.MaxWidthLine(message);
            if (maxWidthLine > Application.Driver.Cols)
            {
                maxWidthLine = Application.Driver.Cols;
            }
            
            maxWidthLine = Math.Max(maxWidthLine, defaultWidth);
               

            int textWidth = Math.Min(TextFormatter.MaxWidth(message, maxWidthLine), Application.Driver.Cols);
            int textHeight = TextFormatter.MaxLines(message, textWidth); // message.Count (ustring.Make ('\n')) + 1;
            int msgboxHeight = Math.Min(Math.Max(1, textHeight) + 4, Application.Driver.Rows); // textHeight + (top + top padding + buttons + bottom)

            Width = Math.Min(Math.Max(maxWidthLine, Math.Max(Title.ConsoleWidth, Math.Max(textWidth + 2, buttonWidth))), Application.Driver.Cols);
            Height = msgboxHeight;
        }

        internal static bool Show(string title, string message, string okText = "Yes", string cancelText = "No")
        {
            var dlg = new ConfirmDialog(title, message, okText, cancelText);
            Application.Run(dlg);
            return dlg.Result;
        }
    }
}
